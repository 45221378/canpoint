<!--pages/markWrongList/markWrongList.wxml-->
<wxs src="./../../utils/check.wxs" module="tools" />

<view class="markWrongList">
  <text class="top">当前作业：{{section_name}}</text>
  <view class="question">
    <block>
      <view class="easy" wx:for="{{pageData}}" wx:for-item="item" wx:key="index">
        <!-- 大题的情况 无小题   -->
        <view wx:if="{{item.child===0}}">
          <!-- 客观题 单选题-->
          <view wx:if="{{item.quesType===1}}">
            <view class="right-answer">
              <text>{{item.index}}</text>. 正确答案：<text > {{item.answers}}</text>
            </view>
            <view class="taps"> 
                <text class="left">标记我的答案：</text>
                <view class="answer clearfix" >
                  <block
                    wx:for="{{item.options}}" 
                    wx:for-item="it"
                    wx:key="index">
                      <view 
                        bindtap="onechecked" data-datarow='{{item}}' data-flag="{{item.flag}}"  data-it="{{it}}" data-idx="{{item.index}}"
                        class="ques {{item.checked==it&&item.checked==item.answers?'checked':item.checked==it?'checkedRed':''}}" 
                        >
                          {{it}}
                      </view>
                  </block>
                </view>
            </view>
          </view>
          <!-- 客观题 多选题-->
          <view wx:if="{{item.quesType===2}}">
            <view class="right-answer">
              <text>{{item.index}}</text>. 正确答案：<text > {{item.answers}}</text>
            </view>
            <view class="taps">
                <text class="left">标记我的答案：</text>
                <view class="answer clearfix" >
                  <block
                    wx:for="{{item.options}}" 
                    wx:for-item="it"
                    wx:key="index">
                      <view 
                        bindtap="doublechecked" data-datarow='{{item}}' data-flag="{{item.flag}}"  data-it="{{it}}" data-idx="{{item.index}}"
                        class="ques {{tools.bar(item.checked,it)&&tools.bar(item.answers,it)?'checked':tools.bar(item.checked,it)?'checkedRed':''}}" 
                        >
                          {{it}}
                      </view>
                  </block>
                </view>
            </view>
          </view>
          <!-- 主观题-->
          <view wx:if="{{item.quesType===300}}">
            <view class="right-answer">
              <view class="nochildren">
                <text>{{item.index}}</text>. 正确答案： 答案不唯一，如图。<text > </text>
              </view>
              <block wx:for="{{item.newAnwsers}}" wx:for-item="i" wx:key="index">
                <parser html="{{i}}" />
              </block>
            </view>
            <view class="taps">
                <text class="left">标记我的答案：</text>
                <view class="answer clearfix">
                  <view 
                    class="ques unormal {{item.checked===1?'checked':''}}" 
                    bindtap="bindAllchecked"
                    data-datarow='{{item}}' data-it="{{1}}" data-idx="{{item.index}}"
                  >
                    我答对了
                  </view>
                  <view 
                    class="ques unormal {{item.checked===0?'checkedRed':''}}" 
                    bindtap="bindAllchecked"
                    data-datarow='{{item}}' data-it="{{0}}" data-idx="{{item.index}}"
                  >
                    标为错题
                  </view>
                </view>
            </view>
          </view>
        </view>
        <!-- 大题的情况 有小题   -->
        <view wx:if="{{item.child===1}}">
          <!-- <view class="right-answer">
            <parser html="{{item.stem}}" />
          </view> -->
          <block wx:for="{{item.children}}" wx:for-item="itch" wx:key="index">
            <!-- 特殊题型 7选5-->
            <!-- <view wx:if="{{item.template===14}}">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                <view class="haveanswer">
                  <text>{{itch.index}}. </text>
                  <text>正确答案123</text>
                  <text>{{itch.answers[0]}}</text>
                </view>
                <parser html="{{itch.answers}}" />
                <view class="taps">
                  <text class="left">标记我的答案：</text>
                  <view class="answer clearfix" >
                    <block
                      wx:for="{{itch.options}}" 
                      wx:for-item="it"
                      wx:key="iidx">
                        <view 
                          bindtap="speonechecked" data-datarow='{{item}}'  data-it="{{it}}" data-idx="{{item.index}}" data-iidx="{{i.index}}"
                          class="ques {{tools.bar(itch.my_answer,it)?'checked':''}}" 
                          >
                            {{it}}
                        </view>
                    </block>
                  </view>
                </view>
            </view> -->
            <!-- 大题的情况 有小题  单选题 -->
            <view wx:if="{{itch.template===1}}">
              <view class="right-answer">
                <text>{{item.stem}}.{{itch.index}}</text> 正确答案：<text > {{itch.answers}}</text>
              </view>
              <view class="taps"> 
                  <text class="left">标记我的答案：</text>
                  <view class="answer clearfix" >
                    <block
                      wx:for="{{itch.options}}" 
                      wx:for-item="itopt"
                      wx:key="index">
                        <view 
                          bindtap="onechildchecked" data-datarow='{{item}}' data-it="{{itopt}}" data-idx="{{item.index}}" data-iidx="{{itch.index}}"
                          class="ques {{tools.bar(itch.checked,itopt)&&itopt==itch.answers?'checked':tools.bar(itch.checked,itopt)?'checkedRed':''}}" 
                          >
                            {{itopt}}
                        </view>
                    </block>
                  </view>
              </view>
            </view>
            <!-- 大题的情况 有小题  客观题 -->
            <view wx:if="{{itch.template!==1&&item.template!==2&&itch.template!==14}}">
              <view class="right-answer">
                <text>{{item.stem}}.{{itch.index}}</text>  正确答案：
                <block wx:for="{{itch.answers[0]}}" wx:for-item="i" wx:key="index">
                  <parser id="article" html="{{i}}" />
                </block>
              </view>
              <view class="taps"> 
                  <text class="left">标记我的答案：</text>
                  <view class="answer clearfix" >
                    <block
                      wx:for="{{itch.options}}" 
                      wx:for-item="itopt"
                      wx:key="index">
                        <view 
                          bindtap="onechildchecked" data-datarow='{{item}}' data-it="{{itopt}}" data-idx="{{item.index}}" data-iidx="{{itch.index}}"
                          class="ques unormal  {{itch.checked=='1'&&itch.checked==itopt?'checked':itch.checked==0&&itch.checked==itopt?'checkedRed':''}}" 
                          >
                            {{itopt=='1'?'我答对了':'标为错题'}}
                        </view>
                    </block>
                  </view>
              </view>
            </view>
          </block>
        </view>
      </view>
    </block>
    <!-- 提交的 my_answer  主观题 正确 1 错误 0 -->
    <!-- stem 有小题 显示 此字段，找childs -->
    <!-- questionType  里面的id 为 1 2 4表示是客观题 -->
  </view>  
  <view class="bottom-btn">
    <button class="submit button" bindtap="subTip">提交</button>
  </view>
</view>

